{{ template "header" . }}
<body>
    {{ template "navbar" . }}
    {{ template "error_message_notification" . }}
    <div id="padding-when-error"></div>
    <div class="main_padding_container">
        {{ if .success }}
            <div class="block"></div>
            <div style="cursor: default; padding-bottom: 2rem">
                <div class="field is-grouped is-grouped-multiline">
                  <div class="control">
                    <div class="tags has-addons">
                      <span class="tag is-link">Date</span>
                      <span class="tag">{{ .date }}</span>
                    </div>
                  </div>
                  {{ range .author }}
                    <div class="control">
                      <div class="tags has-addons">
                        <span class="tag is-link">Author</span>
                        <span class="tag">{{ . }}</span>
                      </div>
                    </div>
                  {{ end }}
                  <div class="control">
                    <div class="tags has-addons">
                      <span class="tag">{{ .category }}</span>
                    </div>
                  </div>
                  {{ range $t := .tags }}
                    <div class="control">
                      <div class="tags has-addons">
                        <span class="tag">{{ $t }}</span>
                      </div>
                    </div>
                  {{ end }}
                </div>
            </div>
            <div class="block" style="text-align: center">
                <!-- <p class="title is-2 has-text-warning"></p> -->
                <p class="title is-2"></p>
                <p class="subtitle is-4"></p>
            </div>
            <div class="content is-normal">
            </div>
            <script>
                // If transform in backend, the '<' and '>' symbols will be encoded
                document.querySelector('.title').innerHTML = "{{ .title }}".replaceAll(' ', '&nbsp;');
                document.querySelector('.subtitle').innerHTML = "{{ .subtitle }}".replaceAll(' ', '&nbsp;');

                var imgHead = '<div class="block px-2" style="max-width: 90%; max-height: 500px; overflow-y: hidden; margin-left: auto; margin-right: auto;"><figure class="image is-16by9">';
                var imgTail = '</figure></div>';
                var content = "{{ .content }}".replace(/<p>(<img.*>)<\/p>/g, imgHead + "$1" + imgTail) ;

                var quoteHead = '<article class="message is-warning"> <div class="message-body" style="background-color: #fdfdfd !important; color: #4A4A4A !important;">';
                var quoteTail = '</div></article>';
                content = content.replaceAll('<blockquote>', quoteHead).replaceAll('</blockquote>', quoteTail);
                document.querySelector('.content.is-normal').innerHTML = content;
            </script>
        {{ end }}
        <!--
        <article class="message is-warning">
          <div class="message-header" style="color: #4A4A4A !important;">
            <p>Quote title</p>
          </div>
          <div class="message-body" style="background-color: #fdfdfd !important; color: #4A4A4A !important;">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. <strong>Pellentesque risus mi</strong>, tempus quis placerat ut, porta nec nulla. Vestibulum rhoncus ac ex sit amet fringilla. Nullam gravida purus diam, et dictum <a>felis venenatis</a> efficitur. Aenean ac <em>eleifend lacus</em>, in mollis lectus. Donec sodales, arcu et sollicitudin porttitor, tortor urna tempor ligula, id porttitor mi magna a neque. Donec dui urna, vehicula et sem eget, facilisis sodales sem.
          </div>
        </article>
        <div class="content is-normal">
          <h1>Hello World</h1>
          <p>Lorem ipsum<sup><a>[1]</a></sup> dolor sit amet, consectetur adipiscing elit. Nulla accumsan, metus ultrices eleifend gravida, nulla nunc varius lectus, nec rutrum justo nibh eu lectus. Ut vulputate semper dui. Fusce erat odio, sollicitudin vel erat vel, interdum mattis neque. Sub<sub>script</sub> works as well!</p>
          <h3>Third level</h3>
          <p>Curabitur accumsan turpis pharetra <strong>augue tincidunt</strong> blandit. Quisque condimentum maximus mi, sit amet commodo arcu rutrum id. Proin pretium urna vel cursus venenatis. Suspendisse potenti. Etiam mattis sem rhoncus lacus dapibus facilisis.</p>
          <figure class="image is-16by9">
            <iframe class="has-ratio" width="640" height="360" src="https://www.youtube.com/embed/YE7VzlLtp-4" frameborder="0" allowfullscreen></iframe>
          </figure>
          <p>Donec at dignissim dui. Ut et neque nisl.</p>
          <blockquote>Ut venenatis, nisl scelerisque sollicitudin fermentum, quam libero hendrerit ipsum, ut blandit est tellus sit amet turpis.</blockquote>
          <ul>
            <li>In fermentum leo eu lectus mollis, quis dictum mi aliquet.</li>
            <li>Morbi eu nulla lobortis, lobortis est in, fringilla felis.</li>
            <li>Aliquam nec felis in sapien venenatis viverra fermentum nec lectus.</li>
            <li>Ut non enim metus.</li>
          </ul>

          {{ template "one_image" . }}
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vulputate semper dui. Fusce erat odio, sollicitudin vel erat vel, interdum mattis neque. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vulputate semper dui. Fusce erat odio, sollicitudin vel erat vel, interdum mattis neque.</p>
          {{ template "two_images" . }}
          {{ template "three_images" . }}

          <h5>Fifth level</h5>
          <p>Because images can take a few seconds to load (or not at all), use the image container to specify a precisely sized container so that your layout isn't broken because of image loading or image errors</p>
        </div>
        -->
    </div>
    {{ template "footer" . }}
    {{ if not .success }}
        <script>
            showErrMsg( {{ .err }} )
            var offset = document.querySelector('nav').offsetHeight +  document.querySelector('footer').offsetHeight + 60; // 60: the padding in the footer
            document.querySelector('#padding-when-error').style.paddingBottom = `${window.innerHeight - offset}px`;
        </script>
    {{ end }}
</body>
